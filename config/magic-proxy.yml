# Magic Proxy configuration

# Required: one of ["traefik"]. More backends may be added in the future.
proxyBackend: traefik


traefik:
  # Output file for Traefik dynamic configuration
  outputFile: traefik-magic.yml

  # Templates are loaded from CONFIG_DIRECTORY (defaults to ./config/)
  # Specify template filenames or paths relative to CONFIG_DIRECTORY
  # Services reference these templates by filename (e.g., "example.yml")
  # in their x-magic-proxy.template field
  templates:
    - ./template/oidc.yml
    - ./template/example.yml
api:
  # Enable or disable the Magic Proxy API; required for docker health, external logging. 
  enabled: true

  # Port for the Magic Proxy API
  # API always binds to 0.0.0.0 for Docker compatibility
  port: 12352

  # Optional API key for authentication
  # If set, all API requests must include this key via:
  # - X-API-Key header, or
  # - ?key=<value> query parameter
  # RECOMMENDED: Set this when exposing the API
  # key: your-secret-key-here

  # Request timeout in milliseconds (default: 1000ms)
  # Requests taking longer than this will be aborted
  timeout: 1000

  # Allow clients to list all available API routes at GET /api/routes
  # Risk: An attacker with authenticated access to the API could heuristically detect
  # the kind of proxy and provider you're using, eg. "traefik" "docker"
  allowListingRoutes: true