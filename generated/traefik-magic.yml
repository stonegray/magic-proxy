http:
  routers:
    magic-proxy-web-test2:
      rule: Host(`web-test2.grafana.proxy.example.org`)
      entryPoints:
        - web
      middlewares:
        - geoblock
        - magic-proxy-web-test2-oidc
      service: magic-proxy-web-test2
  services:
    magic-proxy-web-test2:
      loadBalancer:
        servers:
          - url: http://web-test1:8000
  middlewares:
    magic-proxy-web-test2-oidc:
      plugin:
        traefik-oidc-auth:
          Secret: '3141234'
          Provider:
            Url: https://auth.stonegray.ca/application/o/traefik/
            ClientId: asdlkfjhalsdkjgas
            ClientSecret: asdklgjhasd
          Scopes: openid email profile
          CallbackURL: /oidc/callback
          CookieSameSite: lax
          LogLevel: DEBUG
          Authorization:
            AssertClaims:
              - Name: groups
                Exists: true
              - Name: groups
                AllOf:
                  - magic-proxy
                  - magic-proxy-web-test2
    geoblock:
      plugin:
        geoblock:
          allowedCountries:
            - CA
            - US
          bannedCountries:
            - RU
            - CN
          api: https://get.geojs.io/v1/ip/country.json
